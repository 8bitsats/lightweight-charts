<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Test UMD Chart</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            padding: 20px;
            margin: 0;
        }
        #chart-container {
            width: 600px;
            height: 300px;
            border: 1px solid #ccc;
            position: relative;
        }
        #debug {
            margin-top: 20px;
            padding: 10px;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Test UMD Chart</h1>
    <div id="chart-container"></div>
    <div id="debug"></div>

    <script src="./dist/lightweight-charts.standalone.development.js"></script>
    <script>
        const debugEl = document.getElementById('debug');
        
        function log(message) {
            console.log(message);
            debugEl.textContent += message + '\n';
        }

        try {
            log('Starting chart initialization...');
            
            // Check if LightweightCharts is available
            if (typeof LightweightCharts === 'undefined') {
                throw new Error('LightweightCharts is not defined');
            }
            
            log('LightweightCharts library loaded successfully');
            log(`LightweightCharts version: ${LightweightCharts.version()}`);
            
            // Create chart
            const chart = LightweightCharts.createChart(document.getElementById('chart-container'), {
                width: 600,
                height: 300,
                layout: {
                    background: { color: '#ffffff' },
                    textColor: '#333',
                },
                grid: {
                    vertLines: { color: '#f0f0f0' },
                    horzLines: { color: '#f0f0f0' },
                },
                timeScale: {
                    timeVisible: true,
                    borderColor: '#D1D4DC',
                },
            });
            
            log('Chart created successfully');
            
            // Create line series
            const lineSeries = chart.addLineSeries({
                color: '#2962FF',
                lineWidth: 2,
            });
            
            log('Line series added successfully');
            
            // Set data
            const data = [
                { time: '2019-04-11', value: 80.01 },
                { time: '2019-04-12', value: 96.63 },
                { time: '2019-04-13', value: 76.64 },
                { time: '2019-04-14', value: 81.89 },
                { time: '2019-04-15', value: 74.43 },
                { time: '2019-04-16', value: 80.01 },
                { time: '2019-04-17', value: 96.63 },
                { time: '2019-04-18', value: 76.64 },
                { time: '2019-04-19', value: 81.89 },
                { time: '2019-04-20', value: 74.43 },
            ];
            
            lineSeries.setData(data);
            log('Data set successfully');
            
            // Fit content
            chart.timeScale().fitContent();
            log('Chart content fitted');
            
        } catch (error) {
            log(`ERROR: ${error.message}`);
            console.error(error);
        }
    </script>
</body>
</html> 